<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Settings - Chuah Learning App</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="header">
    <div class="header-left">
      <a href="dashboard.html" class="logo">üìö Chuah Learning</a>
    </div>
    <div class="header-right">
      <a href="dashboard.html" class="header-nav-link">‚Üê Back to Dashboard</a>
      <button class="btn btn-secondary" id="logout-btn">Logout</button>
    </div>
  </header>

  <main class="container" style="max-width: 900px; padding: 40px 20px;">
    <h1>Admin Settings</h1>
    
    <div id="error-message" class="alert alert-error hidden"></div>
    <div id="success-message" class="alert alert-success hidden"></div>

    <div class="card" style="margin-top: 30px;">
      <h2>Model Configuration</h2>
      
      <div style="margin-top: 20px;">
        <div class="form-group">
          <label class="form-label" for="openai-model">OpenAI Model</label>
          <select id="openai-model" class="form-input">
            <option value="gpt-4">GPT-4</option>
            <option value="gpt-4-turbo">GPT-4 Turbo</option>
            <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="gemini-model">Gemini Model</label>
          <select id="gemini-model" class="form-input">
            <option value="gemini-pro">Gemini Pro</option>
            <option value="gemini-pro-vision">Gemini Pro Vision</option>
          </select>
        </div>
        
        <div style="margin-top: 24px;">
          <button class="btn btn-primary" id="save-models-btn">Save Model Settings</button>
        </div>
      </div>
    </div>

    <div class="card" style="margin-top: 30px;">
      <h2>AI Agent API Keys Configuration</h2>
      <p style="color: #64748b; margin-top: 12px; margin-bottom: 20px;">
        Configure API keys for each AI agent. Select provider (OpenAI or Gemini) and enter your API key.
      </p>

      <!-- Agent 1: Course Structure -->
      <div style="margin-bottom: 30px; padding: 20px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
        <h3 style="margin-top: 0; margin-bottom: 8px;">1Ô∏è‚É£ Course Structure Agent</h3>
        <p style="color: #64748b; font-size: 14px; margin-bottom: 16px;">
          Generates course modules and topics from course outline
        </p>
        
        <div style="display: grid; grid-template-columns: 150px 1fr; gap: 12px; align-items: end;">
          <div class="form-group" style="margin-bottom: 0;">
            <label class="form-label" for="cs-provider">Provider</label>
            <select id="cs-provider" class="form-input">
              <option value="openai">OpenAI</option>
              <option value="gemini">Gemini</option>
            </select>
          </div>
          
          <div class="form-group" style="margin-bottom: 0; position: relative;">
            <label class="form-label" for="cs-api-key">API Key</label>
            <div style="position: relative;">
              <input 
                type="password" 
                id="cs-api-key" 
                class="form-input" 
                placeholder="Enter API key"
                style="font-family: monospace; padding-right: 50px;"
              >
              <button 
                type="button" 
                class="toggle-key-btn" 
                data-target="cs-api-key"
                style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #64748b; font-size: 18px; padding: 4px 8px;"
                title="Show/Hide API Key"
              >
                üëÅÔ∏è
              </button>
            </div>
          </div>
        </div>
        <small style="color: #64748b; font-size: 12px; display: block; margin-top: 8px;">
          Status: <span id="cs-status" class="status-badge">Not configured</span>
        </small>
      </div>

      <!-- Agent 2: Content Generation (Lecture Notes) -->
      <div style="margin-bottom: 30px; padding: 20px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
        <h3 style="margin-top: 0; margin-bottom: 8px;">2Ô∏è‚É£ Content Generation Agent</h3>
        <p style="color: #64748b; font-size: 14px; margin-bottom: 16px;">
          Generates lecture notes for each topic
        </p>
        
        <div style="display: grid; grid-template-columns: 150px 1fr; gap: 12px; align-items: end;">
          <div class="form-group" style="margin-bottom: 0;">
            <label class="form-label" for="cg-provider">Provider</label>
            <select id="cg-provider" class="form-input">
              <option value="openai">OpenAI</option>
              <option value="gemini">Gemini</option>
            </select>
          </div>
          
          <div class="form-group" style="margin-bottom: 0; position: relative;">
            <label class="form-label" for="cg-api-key">API Key</label>
            <div style="position: relative;">
              <input 
                type="password" 
                id="cg-api-key" 
                class="form-input" 
                placeholder="Enter API key"
                style="font-family: monospace; padding-right: 50px;"
              >
              <button 
                type="button" 
                class="toggle-key-btn" 
                data-target="cg-api-key"
                style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #64748b; font-size: 18px; padding: 4px 8px;"
                title="Show/Hide API Key"
              >
                üëÅÔ∏è
              </button>
            </div>
          </div>
        </div>
        <small style="color: #64748b; font-size: 12px; display: block; margin-top: 8px;">
          Status: <span id="cg-status" class="status-badge">Not configured</span>
        </small>
      </div>

      <!-- Agent 3: Tutorial Exercise -->
      <div style="margin-bottom: 30px; padding: 20px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
        <h3 style="margin-top: 0; margin-bottom: 8px;">3Ô∏è‚É£ Tutorial Exercise Agent</h3>
        <p style="color: #64748b; font-size: 14px; margin-bottom: 16px;">
          Generates tutorial exercises with answers (based on topic and lecture notes)
        </p>
        
        <div style="display: grid; grid-template-columns: 150px 1fr; gap: 12px; align-items: end;">
          <div class="form-group" style="margin-bottom: 0;">
            <label class="form-label" for="te-provider">Provider</label>
            <select id="te-provider" class="form-input">
              <option value="openai">OpenAI</option>
              <option value="gemini">Gemini</option>
            </select>
          </div>
          
          <div class="form-group" style="margin-bottom: 0; position: relative;">
            <label class="form-label" for="te-api-key">API Key</label>
            <div style="position: relative;">
              <input 
                type="password" 
                id="te-api-key" 
                class="form-input" 
                placeholder="Enter API key"
                style="font-family: monospace; padding-right: 50px;"
              >
              <button 
                type="button" 
                class="toggle-key-btn" 
                data-target="te-api-key"
                style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #64748b; font-size: 18px; padding: 4px 8px;"
                title="Show/Hide API Key"
              >
                üëÅÔ∏è
              </button>
            </div>
          </div>
        </div>
        <small style="color: #64748b; font-size: 12px; display: block; margin-top: 8px;">
          Status: <span id="te-status" class="status-badge">Not configured</span>
        </small>
      </div>

      <!-- Agent 4: Practical Task -->
      <div style="margin-bottom: 30px; padding: 20px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
        <h3 style="margin-top: 0; margin-bottom: 8px;">4Ô∏è‚É£ Practical Task Agent</h3>
        <p style="color: #64748b; font-size: 14px; margin-bottom: 16px;">
          Generates practical hands-on tasks with step-by-step instructions
        </p>
        
        <div style="display: grid; grid-template-columns: 150px 1fr; gap: 12px; align-items: end;">
          <div class="form-group" style="margin-bottom: 0;">
            <label class="form-label" for="pt-provider">Provider</label>
            <select id="pt-provider" class="form-input">
              <option value="openai">OpenAI</option>
              <option value="gemini">Gemini</option>
            </select>
          </div>
          
          <div class="form-group" style="margin-bottom: 0; position: relative;">
            <label class="form-label" for="pt-api-key">API Key</label>
            <div style="position: relative;">
              <input 
                type="password" 
                id="pt-api-key" 
                class="form-input" 
                placeholder="Enter API key"
                style="font-family: monospace; padding-right: 50px;"
              >
              <button 
                type="button" 
                class="toggle-key-btn" 
                data-target="pt-api-key"
                style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #64748b; font-size: 18px; padding: 4px 8px;"
                title="Show/Hide API Key"
              >
                üëÅÔ∏è
              </button>
            </div>
          </div>
        </div>
        <small style="color: #64748b; font-size: 12px; display: block; margin-top: 8px;">
          Status: <span id="pt-status" class="status-badge">Not configured</span>
        </small>
      </div>

      <!-- Agent 5: Quiz -->
      <div style="margin-bottom: 30px; padding: 20px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
        <h3 style="margin-top: 0; margin-bottom: 8px;">5Ô∏è‚É£ Quiz Agent</h3>
        <p style="color: #64748b; font-size: 14px; margin-bottom: 16px;">
          Generates quiz with MCQ and short answer questions (based on topic and lecture notes)
        </p>
        
        <div style="display: grid; grid-template-columns: 150px 1fr; gap: 12px; align-items: end;">
          <div class="form-group" style="margin-bottom: 0;">
            <label class="form-label" for="qz-provider">Provider</label>
            <select id="qz-provider" class="form-input">
              <option value="openai">OpenAI</option>
              <option value="gemini">Gemini</option>
            </select>
          </div>
          
          <div class="form-group" style="margin-bottom: 0; position: relative;">
            <label class="form-label" for="qz-api-key">API Key</label>
            <div style="position: relative;">
              <input 
                type="password" 
                id="qz-api-key" 
                class="form-input" 
                placeholder="Enter API key"
                style="font-family: monospace; padding-right: 50px;"
              >
              <button 
                type="button" 
                class="toggle-key-btn" 
                data-target="qz-api-key"
                style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #64748b; font-size: 18px; padding: 4px 8px;"
                title="Show/Hide API Key"
              >
                üëÅÔ∏è
              </button>
            </div>
          </div>
        </div>
        <small style="color: #64748b; font-size: 12px; display: block; margin-top: 8px;">
          Status: <span id="qz-status" class="status-badge">Not configured</span>
        </small>
      </div>

      <!-- Agent 6: Audiobook -->
      <div style="margin-bottom: 30px; padding: 20px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
        <h3 style="margin-top: 0; margin-bottom: 8px;">6Ô∏è‚É£ Audiobook Agent</h3>
        <p style="color: #64748b; font-size: 14px; margin-bottom: 16px;">
          Generates audiobook from lecture notes (Text-to-Speech). <strong>Note:</strong> Currently supports OpenAI TTS only.
        </p>
        
        <div style="display: grid; grid-template-columns: 150px 1fr; gap: 12px; align-items: end;">
          <div class="form-group" style="margin-bottom: 0;">
            <label class="form-label" for="ab-provider">Provider</label>
            <select id="ab-provider" class="form-input">
              <option value="openai">OpenAI</option>
              <option value="gemini" disabled>Gemini (Coming Soon)</option>
            </select>
          </div>
          
          <div class="form-group" style="margin-bottom: 0; position: relative;">
            <label class="form-label" for="ab-api-key">API Key</label>
            <div style="position: relative;">
              <input 
                type="password" 
                id="ab-api-key" 
                class="form-input" 
                placeholder="Enter API key"
                style="font-family: monospace; padding-right: 50px;"
              >
              <button 
                type="button" 
                class="toggle-key-btn" 
                data-target="ab-api-key"
                style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #64748b; font-size: 18px; padding: 4px 8px;"
                title="Show/Hide API Key"
              >
                üëÅÔ∏è
              </button>
            </div>
          </div>
        </div>
        <small style="color: #64748b; font-size: 12px; display: block; margin-top: 8px;">
          Status: <span id="ab-status" class="status-badge">Not configured</span>
        </small>
      </div>

      <div style="margin-top: 24px;">
        <button class="btn btn-primary" id="save-api-keys-btn">Save All API Keys</button>
        <small style="display: block; color: #64748b; margin-top: 8px;">
          üí° Tip: Leave API key field empty to remove/clear the key. Keys are stored securely and never displayed.
        </small>
      </div>
    </div>
  </main>

  <script src="js/config.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/api.js"></script>
  <script src="js/admin-settings.js"></script>
</body>
</html>
